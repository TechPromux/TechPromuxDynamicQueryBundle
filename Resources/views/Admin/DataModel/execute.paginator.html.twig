{% if paginator is not null and paginator.haveToPaginate %}     

    {% set firstPage = 1 %}  
    {% set lastPage = paginator.nbPages %}  
    {% set currentPage = paginator.currentPage %}  
    {% set previousPage = paginator.hasPreviousPage?paginator.previousPage:1 %}  
    {% set nextPage = paginator.hasNextPage?paginator.nextPage:lastPage %}  

    {% set semiMaxPaginatorLinks = maxPaginatorLinks%2==0?maxPaginatorLinks/2:(maxPaginatorLinks-1)/2 %}  

    {% set minPage = paginator.currentPage-semiMaxPaginatorLinks>=1?paginator.currentPage-semiMaxPaginatorLinks:1%}  
    {% set maxPage = minPage+maxPaginatorLinks<=lastPage?minPage+maxPaginatorLinks-1:lastPage %}  
    {% if (minPage+maxPaginatorLinks>lastPage)%}
        {% set minPage = lastPage-maxPaginatorLinks+1>=1?lastPage-maxPaginatorLinks+1:1%}  
    {% endif %}

    <ul class="{{ paginator_container_class }}">

        <!-- FIRST -->
        {% if currentPage > 1 %}
            {% set rParams =  {'page': firstPage} | merge(routeParams) %}
            <li class="{{ firstEnabledClass }}" title="{{'Go to first page' | trans({},'TechPromuxDynamicQueryBundle')}}" data-placement="top" data-toggle="tooltip">
                <a href="{{ admin.generateUrl('execute', rParams) }}">{{ firstPageText }}</a>
            </li>
        {% else %}
            <li class="{{ firstDisabledClass }}" title="{{'Go to first page' | trans({},'TechPromuxDynamicQueryBundle')}}" data-placement="top" data-toggle="tooltip">
                <span>{{ firstPageText }}</span>
            </li>
        {% endif %}

        <!-- PREVIOUS -->
        {% if currentPage > 1 %}   
            {% set rParams =  {'page': previousPage} | merge(routeParams) %}
            <li class="{{ previousEnabledClass }}" title="{{'Go to previous page' | trans({},'TechPromuxDynamicQueryBundle')}}" data-placement="top" data-toggle="tooltip">
                <a href="{{ admin.generateUrl('execute', rParams) }}">{{ previousPageText }}</a>
            </li>
        {% else %}
            <li class="{{ previousDisabledClass }}" title="{{'Go to previous page' | trans({},'TechPromuxDynamicQueryBundle')}}" data-placement="top" data-toggle="tooltip">
                <span>{{ previousPageText }}</span>
            </li>
        {% endif %}

        <!-- NUMBERS -->
        {% for page in minPage..maxPage %}
            {% if ((page>currentPage and maxPage*2-currentPage<lastPage) or (page<currentPage and minPage*2-currentPage>1))%}
                {% set ppage = page*2-currentPage %}
            {% else%}
                {% set ppage = page %}
            {% endif %}
            {% if page == currentPage %}
                <li class="{{ currentClass }}" title="{{'Go to page' | trans({},'TechPromuxDynamicQueryBundle')}} {{page}}" data-placement="top" data-toggle="tooltip">
                    <span>{{ page }}</span>
                </li>
            {% else %}
                {% set rParams =  {'page': ppage} | merge(routeParams) %}
                <li title="{{'Go to page' | trans({},'TechPromuxDynamicQueryBundle')}} {{ppage}}" data-placement="top" data-toggle="tooltip">
                    <a href="{{ admin.generateUrl('execute', rParams) }}">{{ ppage }}</a>
                </li>
            {% endif %}
        {% endfor %}

        <!-- NEXT -->
        {% if currentPage < lastPage %}
            {% set rParams =  {'page': nextPage} | merge(routeParams) %}
            <li class="{{ nextEnabledClass }}" title="{{'Go to next page' | trans({},'TechPromuxDynamicQueryBundle')}}" data-placement="top" data-toggle="tooltip">
                <a href="{{ admin.generateUrl('execute', rParams) }}">{{ nextPageText }}</a>
            </li>
        {% else %}
            <li class="{{ nextDisabledClass }}" title="{{'Go to next page' | trans({},'TechPromuxDynamicQueryBundle')}}" data-placement="top" data-toggle="tooltip">
                <span>{{ nextPageText }}</span>
            </li>
        {% endif %}

        <!-- LAST -->
        {% if currentPage < lastPage %}
            {% set rParams =  {'page': lastPage} | merge(routeParams) %}
            <li class="{{ lastEnabledClass }}" title="{{'Go to last page' | trans({},'TechPromuxDynamicQueryBundle')}}" data-placement="top" data-toggle="tooltip">
                <a href="{{ admin.generateUrl('execute', rParams) }}">{{ lastPageText }}</a>
            </li>
        {% else %}
            <li class="{{ lastDisabledClass }}" title="{{'Go to last page' | trans({},'TechPromuxDynamicQueryBundle')}}" data-placement="top" data-toggle="tooltip">
                <span>{{ lastPageText }}</span>
            </li>
        {% endif %}
    </ul>                                           
{% endif %}